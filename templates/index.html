{% from "baseframe/components.html" import networkbar with context -%}
{% extends theme("layout.html") %}

{% block titletags -%}
  <title>{% block title %}{{ website.title }}{% endblock %}</title>
  <meta name="DC.title" content="{{ website.title }}"/>
{%- endblock %}
{% block description %}Magic with Big Data{% endblock %}

{% block headerbox %}
<header class="header">
  {{ networkbar(siteid='events', login=false) }}
  <div id="masthead" class="container">
    <div id="banner">
      <h1><span class="h1-the">The</span> <span class="h1-fifth">Fifth</span> <span class="h1-elephant">Elephant</span></h1>
      <h2>27 &amp; 28 July 2012</h2>
      <h3>Nimhans Convention Centre, Bangalore</h3>
      <a class="btn btn-success btn-register" href="http://fifthelephant.doattend.com/"><big><strong>Buy Tickets</strong></big><br><del>Rs 5000</del> Rs 2500</a>
    </div>
  </div>
  <div class="navbar">
    <div class="container">
      <ul class="nav" id="main-nav">
        <li><a href="#about">About</a></li>
        <li><a href="#schedule">Programme</a></li>
        <li><a href="#sponsors">Sponsors</a></li>
        <li><a href="#venue">Venue</a></li>
        <li><a href="#credits">Credits</a></li>
        <li class="register"><a href="http://fifthelephant.doattend.com/">Register</a></li>
      </ul>
    </div><!-- /container -->
  </div><!-- /navbar -->
</header>
{% endblock %}

{% block main %}
{% include theme("inc/about.html") %}
{% include theme("inc/proposals.html") %}
{% include theme("inc/sponsors.html") %}
{% include theme("inc/venue.html") %}
{% include theme("inc/credits.html") %}
{% endblock %}

{% block footerscripts %}
<script type="text/javascript">
  $(function() {
    /*
    $("#main-nav > li:first-child").hover(function() {
      $("#masthead").addClass('round-bottom-left');
    }, function() {
      $("#masthead").removeClass('round-bottom-left');
    });
    $("#main-nav > li:last-child").hover(function() {
      $("#masthead").addClass('round-bottom-right');
    }, function() {
      $("#masthead").removeClass('round-bottom-right');
    });
    */
  });
</script>
<script type="text/javascript">
  $(function() {
    // fixed nav-bar transition code
    // adapted from twitter bootstrap docs' sub-nav
    var $win = $(window)
      , $nav = $('.navbar')
      , $masthead = $('#masthead')
      , navTop = $nav.length && $nav.offset().top // - 40
      , isFixed = 0;
    
    var processScroll = function () {
      var scrollTop = $win.scrollTop();
      if (scrollTop >= navTop && !isFixed) {
        isFixed = 1;
        $nav.addClass('navbar-fixed-top');
        $masthead.addClass('navbar-margin');
      } else if (scrollTop <= navTop && isFixed) {
        isFixed = 0;
        $nav.removeClass('navbar-fixed-top');
        $masthead.removeClass('navbar-margin');
      };
    };
    
    processScroll();
    
    $win.on('scroll', processScroll);
    
    // smooth scroll nav links
    $('a', $nav).smoothScroll({
        offset: -80
      , speed: 900
    });

  });
</script>
<script type="text/javascript">
  $(function() {
    var map = new L.Map('map');
    var cloudmadeUrl = 'http://{s}.mqcdn.com/tiles/1.0.0/osm/{z}/{x}/{y}.png',
      subDomains = ['otile1','otile2','otile3','otile4'],
      cloudmadeAttrib = '<a href="http://open.mapquest.co.uk" target="_blank">MapQuest</a>, <a href="http://www.openstreetmap.org/" target="_blank">OpenStreetMap</a> and contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/" target="_blank">CC-BY-SA</a>';
    var cloudmade = new L.TileLayer(cloudmadeUrl, {maxZoom: 18, attribution: cloudmadeAttrib, subdomains: subDomains});

    var venue = new L.LatLng(12.943104, 77.596865); // geographical point (longitude and latitude)
    var center = new L.LatLng(12.943104, 77.616);
    var mobile_center = new L.LatLng(12.943104, 77.596865);
    map.setView(center, 14).addLayer(cloudmade);
    if (map.getSize().x < 768) { map.setView(venue,14); } // on smaller screen where map takes full-width

    var venue_marker = new L.Marker(venue);
    map.addLayer(venue_marker);
    venue_marker.bindPopup('Nimhans Convention Centre').openPopup();
    map.scrollWheelZoom.disable();
    map.doubleClickZoom.disable();
        
    map.on('zoomend', onZoomend);
    function onZoomend(){ map.setView(venue, map.getZoom()); };
  });
</script>
<script type="text/javascript">
  $(function() {
    $(".sponsor-box").on('shown', function() {
      if (typeof _gaq != 'undefined') {
        _gaq.push(['_trackPageview', "/{{ folder.name }}/#" + $(this).attr('id')]);
      };
    });    
    $(".sponsor-box").on('hidden', function() {
      if (typeof _gaq != 'undefined') {
        _gaq.push(['_trackPageview', "/{{ folder.name }}/#"]);
      };
    });    
    $(".sponsor-exit").click(function() {
      if (typeof _gaq != 'undefined') {
        _gaq.push(['_trackPageview', "/out/" + $(this).attr('href')]);
      };
    });
  });
</script>
{% endblock %}
